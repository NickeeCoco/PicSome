(this["webpackJsonppic-some"]=this["webpackJsonppic-some"]||[]).push([[0],{21:function(e,t,a){e.exports=a(32)},26:function(e,t,a){},32:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),i=a.n(c),l=a(8),o=a(20),u=a(15),m=a(6),s=r.a.createContext();function f(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(JSON.parse(localStorage.getItem("cartItems"))||[]),f=Object(m.a)(l,2),d=f[0],v=f[1];return Object(n.useEffect)((function(){fetch("https://raw.githubusercontent.com/bobziroll/scrimba-react-bootcamp-images/master/images.json").then((function(e){return e.json()})).then((function(e){return i(e)}))}),[]),Object(n.useEffect)((function(){localStorage.setItem("cartItems",JSON.stringify(d))}),[d]),r.a.createElement(s.Provider,{value:{allPhotos:c,cartItems:d,toggleFavorite:function(e){var t=c.map((function(t){return t.id===e?Object(u.a)(Object(u.a)({},t),{},{isFavorite:!t.isFavorite}):t}));i(t)},addToCart:function(e){v((function(t){return[].concat(Object(o.a)(t),[e])}))},removeFromCart:function(e){v((function(t){return t.filter((function(t){return t.id!==e}))}))},emptyCart:function(){v([])}}},e.children)}a(26);var d=a(1);var v=function(){var e=Object(n.useContext)(s).cartItems.length>0?"fill":"line";return r.a.createElement("header",null,r.a.createElement("div",{className:"container container--header"},r.a.createElement("h2",null,r.a.createElement(l.b,{to:"/"},"Pic Some")),r.a.createElement(l.b,{to:"/cart"},r.a.createElement("i",{className:"ri-shopping-cart-".concat(e," ri-fw ri-2x")}))))};var E=function(e){var t=Object(n.useState)(!1),a=Object(m.a)(t,2),r=a[0],c=a[1],i=Object(n.useRef)(null);function l(){c(!0)}function o(){c(!1)}return Object(n.useEffect)((function(){return i.current.addEventListener("mouseenter",l),i.current.addEventListener("mouseleave",o),function(){i.current.removeEventListener("mouseenter",l),i.current.removeEventListener("mouseleave",o)}}),[]),[r,i]};var b=function(e){var t=e.item,a=E(),c=Object(m.a)(a,2),i=c[0],l=c[1],o=Object(n.useContext)(s).removeFromCart,u=i?"fill":"line";return r.a.createElement("div",{className:"cart-item"},r.a.createElement("i",{className:"ri-delete-bin-".concat(u),onClick:function(){return o(t.id)},ref:l}),r.a.createElement("img",{src:t.url,width:"130px",alt:t.id}),r.a.createElement("p",null,"$5.99"))};var p=function(){var e=Object(n.useState)(!1),t=Object(m.a)(e,2),a=t[0],c=t[1],i=Object(n.useContext)(s),l=i.cartItems,o=i.emptyCart,u=l.map((function(e){return r.a.createElement(b,{key:e.id,item:e})})),f=5.99*l.length,d=a?"Ordering...":"Place Order";return r.a.createElement("main",{className:"cart-page container"},r.a.createElement("h1",null,"Check out"),u,r.a.createElement("p",{className:"total-cost"},"Total: ",f.toLocaleString("ca-US",{style:"currency",currency:"CAD"})),l.length>0?r.a.createElement("div",{className:"order-button"},r.a.createElement("button",{onClick:function(){return c(!0),void setTimeout((function(){alert("Order placed!"),o(),c(!1)}),3e3)},disabled:a},d)):r.a.createElement("p",null,"Your cart is empty."))};var g=function(e){var t=e.className,a=e.img,c=E(),i=Object(m.a)(c,2),l=i[0],o=i[1],u=Object(n.useContext)(s),f=u.cartItems,d=u.toggleFavorite,v=u.addToCart,b=u.removeFromCart;return r.a.createElement("div",{className:"".concat(t," image-container"),ref:o},r.a.createElement("img",{className:"image-grid",src:a.url,alt:""}),a.isFavorite?r.a.createElement("i",{className:"ri-heart-fill favorite",onClick:function(){return d(a.id)}}):l?r.a.createElement("i",{className:"ri-heart-line favorite",onClick:function(){return d(a.id)}}):void 0,f.some((function(e){return e.id===a.id}))?r.a.createElement("i",{className:"ri-shopping-cart-fill cart",onClick:function(){return b(a.id)}}):l?r.a.createElement("i",{className:"ri-add-circle-line cart",onClick:function(){return v(a)}}):void 0)};var h=function(){var e=Object(n.useContext)(s).allPhotos.map((function(e,t){return r.a.createElement(g,{key:e.id,img:e,className:(a=t,a%5===0?"big":a%6===0?"wide":void 0)});var a}));return r.a.createElement("main",{className:"photos container"},e)};var O=function(){return r.a.createElement("div",null,r.a.createElement(v,null),r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/"},r.a.createElement(h,null)),r.a.createElement(d.a,{path:"/cart"},r.a.createElement(p,null))))};i.a.render(r.a.createElement(f,null,r.a.createElement(l.a,null,r.a.createElement(O,null))),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.47ffefb3.chunk.js.map